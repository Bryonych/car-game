(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[925],{3760:(e,t,s)=>{Promise.resolve().then(s.bind(s,4711))},4711:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var l=s(5155),a=s(2115),i=s(226),n=s(2596),r=s(9688);function c(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,n.$)(t))}async function o(e){let t;t=","===e[0]?e.substring(0,11):e.substring(0,10);let s="https://x02ge7ylrf.execute-api.ap-southeast-2.amazonaws.com/dev/car";console.log(s);let l=await fetch(s+"?date="+t),a=await l.json(),i=function(e){let t=atob(e),s=[];for(let e=0;e<t.length;e+=512){let l=t.slice(e,e+512),a=Array(l.length);for(let e=0;e<l.length;e++)a[e]=l.charCodeAt(e);s.push(new Uint8Array(a))}return new Blob(s,{type:"image/jpeg"})}(a.image);return{image:URL.createObjectURL(i),carlist:a.carlist.sort(),cardata:a.cardata}}var d=s(9799),u=s(2359),h=s(1595),f=s(5857),m=s(9494);let v=e=>{let{selected:t}=e;return(0,l.jsxs)("div",{className:"bg-transparent h-full w-full flex flex-col justify-end rounded-lg shadow-2xl relative z-[60]",children:[(0,l.jsx)(i.P.div,{initial:{opacity:0},animate:{opacity:.6},className:"absolute inset-0 h-full w-full bg-black opacity-60 z-10"}),(0,l.jsx)(i.P.div,{layoutId:"content-".concat(null==t?void 0:t.id),initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,z:100},transition:{duration:.3,ease:"easeInOut"},className:"relative px-8 pb-4 z-[70] text-white",children:null==t?void 0:t.content})]})},x=function(){let[e,t]=(0,a.useState)(),[s,n]=(0,a.useState)([]),[r,x]=(0,a.useState)(null),[g,j]=(0,a.useState)([]),[p,b]=(0,a.useState)([]),[w,y]=(0,a.useState)(!0),[N,S]=(0,a.useState)(""),[k,A]=(0,a.useState)([]),[C,z]=(0,a.useState)(""),[E,B]=(0,a.useState)(0),[D,F]=(0,a.useState)(void 0),[I,O]=(0,a.useState)(!1),[P,_]=(0,a.useState)(!1),L=e=>{null===r?(x(e),S(""),F(void 0)):(j([...g,r]),x(null),P||B(E+1),D&&void 0!==D||O(!0))},M=e=>{let t=e?"I guessed today's car after removing "+E+" blocks":"I didn't guess today's car after removing 15 blocks";navigator.share?navigator.share({title:"Car Game Result",text:t,url:"https://test.com"}).catch(e=>console.log("Sharing failed",e)):alert("Sharing not supported on this browser")};return(0,a.useEffect)(()=>{void 0===e&&o(new Date().toLocaleString("en-GB")).then(e=>{A(e.carlist),t(e.image);let s=[];for(let[t,l]of Object.entries(e.cardata))"Year"!==t&&"Model"!==t&&"Make"!==t&&"S3-Key"!==t&&"Date"!==t&&s.push(t+" :"+l);n(s),z(e.cardata["S3-Key"].replaceAll("-"," "))})},[]),(0,a.useEffect)(()=>{(function(){let e=[],t=["#D62246","#8BA6A9","#3A445D","#E7BB41","#DB995A","#352208","#B8D8D8","#3772FF","#0B6E4F","#8491A3","#F15152","#470FF4","#F7D488","#92140C","#2A1E5C"],l=function(e,t){let s=new Set;for(;s.size<6;)s.add(Math.floor(14*Math.random()));return s}(0,0),a=0;for(let i=0;i<15;i++){let n="";l.has(i)&&a<6&&void 0!=s&&(n=s[a],a++);let r={id:e.length,content:n,className:"",thumbnail:"",color:t[e.length]};e.push(r)}b(e)})()},[s]),(0,a.useEffect)(()=>{p.length>0&&void 0!==e&&y(!1)},[e,p]),w?(0,l.jsx)("div",{children:(0,l.jsx)("p",{children:"waiting"})}):(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"flex justify-center font-serif text-blue-800 mt-15 sm:mt-9",children:"Remove a block to make a guess"}),(0,l.jsxs)("div",{className:"relative w-[80vw] h-full sm:w-[60vw] mt-6 flex justify-center items-center mx-auto",children:[(0,l.jsx)("img",{className:"absolute z-0 w-full max-h-full p-1 inset-0",src:e}),(0,l.jsxs)("div",{className:"w-full h-full min-h-0 grid grid-cols-5 sm:grid-cols-3 relative",children:[p.map((e,t)=>(0,l.jsx)("div",{className:c(e.className,""),children:(0,l.jsx)(i.P.div,{onClick:()=>L(e),title:"block",className:c(e.className,"relative overflow-hidden h-[8vh] sm:h-[11vh]",(null==r?void 0:r.id)===e.id?"rounded-lg cursor-pointer absolute inset-0 h-1/2 md:w-1/2 m-auto z-50 flex justify-center items-center flex-wrap flex-col":g.includes(e)?"-z-40 bg-white":"bg-white "),layoutId:"card-".concat(e.id),style:{background:e.color},children:(null==r?void 0:r.id)===e.id&&(0,l.jsx)(v,{selected:r})})},t)),(0,l.jsx)(i.P.div,{onClick:()=>L(null),className:c("absolute h-full w-full left-0 top-0 bg-white opacity-0 z-10",(null==r?void 0:r.id)?"pointer-events-auto":"pointer-events-none"),animate:{opacity:.3*(null!=r&&!!r.id)}})]})]}),(0,l.jsxs)("div",{className:"flex justify-center items-center mx-auto m-5 sm:w-[70vw]",children:[(0,l.jsx)("div",{className:"w-full max-w-md",children:(0,l.jsx)(d.A,{fullWidth:!0,children:(0,l.jsx)(u.A,{options:k,filterOptions:(e,t)=>{let{inputValue:s}=t;return e.filter(e=>e.toLowerCase().includes(s.toLowerCase())).slice(0,50)},renderInput:e=>(0,l.jsx)(h.A,{...e,label:"Guess"}),disabled:!I||P,onChange:(e,t)=>{S(t)}})})}),(0,l.jsx)(f.A,{className:"m-h-full self-stretch",variant:"contained",disabled:""===N,onClick:()=>{console.log(C+" "+N),""!==C&&N===C?(F(!0),_(!0)):(F(!1),S("")),15!=E||D||_(!0),O(!1)},children:"Submit"})]}),(0,l.jsx)("div",{className:"flex justify-center font-serif text-blue-800",children:(0,l.jsxs)("p",{children:["Number of blocks removed: ",E]})}),!1!=D||P?!1==D&&P?(0,l.jsxs)("div",{className:"flex justify-center mt-5 sm:mt-1",children:[(0,l.jsxs)(m.A,{severity:"info",children:["Hard luck. The correct answer was ",C]}),(0,l.jsx)(f.A,{variant:"contained",onClick:()=>M(!1),children:"Share"})]}):P?(0,l.jsxs)("div",{className:"flex justify-center mt-5 sm:mt-1",children:[(0,l.jsxs)(m.A,{severity:"success",children:["Correct! You guessed ",C," correctly after removing ",E," blocks"]}),(0,l.jsx)(f.A,{variant:"contained",onClick:()=>M(!0),children:"Share"})]}):(0,l.jsx)(l.Fragment,{}):(0,l.jsx)(m.A,{severity:"error",children:"Incorrect. Try again"})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[630,441,684,358],()=>t(3760)),_N_E=e.O()}]);